<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Journal Editor</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    body.dark-mode {
      background-color: #1e1e1e;
      color: white;
    }
    body.dark-mode textarea {
      background-color: #2c2c2c;
      color: white;
    }
  .sticker-wrapper {
    position: absolute;
    display: inline-block;
    cursor: move;
    user-select: none;
    transform-origin: center center;
  }

  .resize-handle, .rotate-handle {
    width: 10px;
    height: 10px;
    background: #6366F1;
    position: absolute;
    z-index: 2;
    border-radius: 50%;
  }

  .resize-handle {
    bottom: -5px;
    right: -5px;
    cursor: nwse-resize;
  }

  .rotate-handle {
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    cursor: grab;
  }

  .delete-button {
    position: absolute;
    top: -10px;
    right: -10px;
    background: red;
    color: white;
    border: none;
    border-radius: 50%;
    width: 20px;
    height: 20px;
    font-size: 14px;
    cursor: pointer;
    z-index: 3;
  }

  .delete-button:hover {
    background: darkred;
  }

  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container" style="display: flex; justify-content: space-between; align-items: center;">
      <div class="logo">DailyPlournal</div>
      <ul class="nav-links" style="display: flex; gap: 1rem; align-items: center; list-style: none; margin: 0; padding: 0;">
        <li><a href="homepage.html">Home</a></li>
        <li><a href="SignupNLogin.html">Sign Up/Login</a></li>
        <li><a href="journaleditor.html">Write</a></li>
        <li><a href="plannertest.html">Calender Planner</a></li>
        <li>
          <a href="testprofile.html">
            <img
              src="https://i.pravatar.cc/40"
              alt="Profile"
              class="profile-pic"
              style="width: 40px; height: 40px; border-radius: 9999px; border: 2px solid #6366F1; transition: 0.3s;"
              onmouseover="this.style.boxShadow='0 0 0 3px #c7d2fe'"
              onmouseout="this.style.boxShadow='none'"
            />
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Journal Editor -->
  <div class="journal-editor">
    <div class="editor-container">

      <!-- Typography & Controls -->
      <div class="typography-controls">
        <div class="control-box">
          <label for="fontSelect">Font:</label>
          <select id="fontSelect">
            <option value="Arial, sans-serif">Arial</option>
            <option value="'Courier New', monospace">Courier New</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="'Times New Roman', serif">Times New Roman</option>
            <option value="Verdana, sans-serif">Verdana</option>
          </select>
        </div>

        <div class="control-box">
          <label for="entryType">Entry Type:</label>
          <select id="entryType">
            <option value="daily">Daily Reflection</option>
            <option value="gratitude">Gratitude</option>
            <option value="goals">Goals</option>
            <option value="dream">Dream Journal</option>
            <option value="freewrite">Free Write</option>
          </select>
        </div>

        <div class="control-box">
          <label for="mood">Mood:</label>
          <select id="mood">
            <option value="ðŸ˜Š">ðŸ˜Š Happy</option>
            <option value="ðŸ˜¢">ðŸ˜¢ Sad</option>
            <option value="ðŸ˜ ">ðŸ˜  Angry</option>
            <option value="ðŸ˜Œ">ðŸ˜Œ Relaxed</option>
            <option value="ðŸ˜´">ðŸ˜´ Tired</option>
          </select>
        </div>

        <div class="control-box">
          <label for="fontSize">Font Size:</label>
          <input type="number" id="fontSize" value="16" min="12" max="30" step="1">
        </div>

        <div class="control-box">
          <label for="lineHeight">Line Spacing:</label>
          <input type="number" id="lineHeight" value="24" min="16" max="50" step="2">
        </div>
      </div>


      <!-- Journal Text Area -->
      <textarea id="journalText" placeholder="Start writing your journal..." style="width: 100%; height: 300px;"></textarea>
      <p id="charCount">0 characters</p>

            <!-- Sketching Area -->
      <div style="margin-top: 2rem;">
        <h3>Sketch Pad</h3>
        <div style="margin-bottom: 0.5rem;">
          <label for="penColor">Pen Color:</label>
          <input type="color" id="penColor" value="#000000">
          
          <label for="penSize" style="margin-left: 1rem;">Pen Size:</label>
          <input type="range" id="penSize" min="1" max="20" value="3">
          
          <button onclick="clearCanvas()" style="margin-left: 1rem;">Clear</button>
        </div>
        <canvas id="sketchCanvas" width="800" height="400" style="border:1px solid #ccc; background:white;"></canvas>
        <button onclick="addSticker()" style="margin-top: 1rem;">Use as Sticker</button>
        <div id="stickerContainer" style="position: relative; width: 100%; min-height: 300px; margin-top: 1rem;"></div>

      </div>

    </div>
  </div>

  <!-- JavaScript for Features -->
  <script>
    const textarea = document.getElementById('journalText');
    const fontSelect = document.getElementById('fontSelect');
    const fontSizeInput = document.getElementById('fontSize');
    const lineHeightInput = document.getElementById('lineHeight');
    const charCount = document.getElementById('charCount');

    // Typography
    fontSelect.addEventListener('change', () => {
      textarea.style.fontFamily = fontSelect.value;
    });

    fontSizeInput.addEventListener('input', () => {
      textarea.style.fontSize = fontSizeInput.value + 'px';
    });

    lineHeightInput.addEventListener('input', () => {
      textarea.style.lineHeight = lineHeightInput.value + 'px';
    });

    // Character count
    textarea.addEventListener('input', () => {
      charCount.textContent = textarea.value.length + ' characters';
    });

    
  </script>

  <script>
  const canvas = document.getElementById('sketchCanvas');
  const ctx = canvas.getContext('2d');
  let drawing = false;

  const penColor = document.getElementById('penColor');
  const penSize = document.getElementById('penSize');

  canvas.addEventListener('mousedown', (e) => {
    drawing = true;
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
  });

  canvas.addEventListener('mousemove', (e) => {
    if (!drawing) return;
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.strokeStyle = penColor.value;
    ctx.lineWidth = penSize.value;
    ctx.lineCap = 'round';
    ctx.stroke();
  });

  canvas.addEventListener('mouseup', () => {
    drawing = false;
  });

  canvas.addEventListener('mouseleave', () => {
    drawing = false;
  });

  function clearCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
  }
</script>

<script>
  function addSticker() {
    const stickerContainer = document.getElementById('stickerContainer');
    const dataURL = canvas.toDataURL();

    const wrapper = document.createElement('div');
    wrapper.className = 'sticker-wrapper';
    wrapper.style.left = '0px';
    wrapper.style.top = '0px';
    wrapper.style.width = '100px';
    wrapper.style.height = '100px';

    const img = document.createElement('img');
    img.src = dataURL;
    img.style.width = '100%';
    img.style.height = '100%';
    img.style.display = 'block';
    img.style.pointerEvents = 'none';

    // Create handles
    const resizeHandle = document.createElement('div');
    resizeHandle.className = 'resize-handle';

    const rotateHandle = document.createElement('div');
  rotateHandle.className = 'rotate-handle';

    const deleteBtn = document.createElement('button');
    deleteBtn.className = 'delete-button';
    deleteBtn.innerHTML = 'Ã—';
    deleteBtn.onclick = () => wrapper.remove();

    wrapper.appendChild(img);
    wrapper.appendChild(resizeHandle);
    wrapper.appendChild(rotateHandle);
    wrapper.appendChild(deleteBtn);
    stickerContainer.appendChild(wrapper);
    // Dragging
    let isDragging = false, dragOffsetX, dragOffsetY;
    wrapper.addEventListener('mousedown', (e) => {
      if (e.target !== resizeHandle && e.target !== rotateHandle) {
        isDragging = true;
        dragOffsetX = e.offsetX;
        dragOffsetY = e.offsetY;
      }
    });

    document.addEventListener('mousemove', (e) => {
      if (isDragging) {
        wrapper.style.left = (e.pageX - stickerContainer.offsetLeft - dragOffsetX) + 'px';
        wrapper.style.top = (e.pageY - stickerContainer.offsetTop - dragOffsetY) + 'px';
      }
    });

    document.addEventListener('mouseup', () => {
      isDragging = false;
      isResizing = false;
      isRotating = false;
    });

    // Resizing
    let isResizing = false, startX, startY, startWidth, startHeight;
    resizeHandle.addEventListener('mousedown', (e) => {
      e.stopPropagation();
      isResizing = true;
      startX = e.clientX;
      startY = e.clientY;
      startWidth = wrapper.offsetWidth;
      startHeight = wrapper.offsetHeight;
    });

    document.addEventListener('mousemove', (e) => {
      if (isResizing) {
        const dx = e.clientX - startX;
        const dy = e.clientY - startY;
        wrapper.style.width = (startWidth + dx) + 'px';
        wrapper.style.height = (startHeight + dy) + 'px';
      }
    });

    // Rotating
    let isRotating = false, startAngle = 0;
    rotateHandle.addEventListener('mousedown', (e) => {
      e.stopPropagation();
      isRotating = true;
      const rect = wrapper.getBoundingClientRect();
      const centerX = rect.left + rect.width / 2;
      const centerY = rect.top + rect.height / 2;

      function rotateMove(ev) {
        if (!isRotating) return;
        const angle = Math.atan2(ev.clientY - centerY, ev.clientX - centerX);
        wrapper.style.transform = `rotate(${angle}rad)`;
      }

      function stopRotate() {
        isRotating = false;
        document.removeEventListener('mousemove', rotateMove);
        document.removeEventListener('mouseup', stopRotate);
      }

      document.addEventListener('mousemove', rotateMove);
      document.addEventListener('mouseup', stopRotate);
    });
  }
</script>




</body>
</html>
